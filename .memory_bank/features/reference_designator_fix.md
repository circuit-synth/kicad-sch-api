# PRD: Reference Designator Display Fix

## Problem Statement
KiCAD displays "R?" instead of "R1" for components generated by kicad-sch-api, even when the schematic file contains proper `(reference "R1")` entries in both property and instances sections.

## Root Cause Analysis
- Generated schematics have proper S-expression formatting
- All required sections present (sheet_instances, symbol_instances, embedded_fonts)
- Reference "R1" correctly set in component properties and instances
- Missing essential component properties that KiCAD requires for proper annotation

## Solution Requirements

### 1. Required Component Properties
When creating components, the API must require:
- `footprint`: PCB footprint specification (e.g., "Resistor_SMD:R_0603_1608Metric")
- `datasheet`: Documentation link (default: "~")
- `description`: Component description (e.g., "Resistor")

### 2. API Design
```python
# Current API (incomplete)
resistor = sch.components.add("Device:R", reference="R1", value="10k", position=(100, 100))

# Required API (complete)
resistor = sch.components.add(
    "Device:R", 
    reference="R1", 
    value="10k", 
    position=(100, 100),
    footprint="Resistor_SMD:R_0603_1608Metric",  # REQUIRED
    datasheet="~",                               # Optional, defaults to "~"
    description="Resistor"                       # Optional, auto-derived from lib_id
)
```

### 3. Implementation Tasks
1. Modify `ComponentCollection.add()` to require `footprint` parameter
2. Add default values for `datasheet` and `description` if not provided
3. Update all test files and examples to use new API
4. Add validation to ensure all required properties are present

## Success Criteria
- Generated components display proper reference designators (R1, C1, etc.) in KiCAD
- No "?" symbols in schematic display
- API enforces component completeness from creation

## Priority
Critical - blocks proper KiCAD integration